<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        function doShowPrev(refFile, refImg) {
            const [file] = refFile.files
            if (file) {
                refImg.src = URL.createObjectURL(file)
            }
        }
    </script>
    <script>
        $(document).ready(function () {
            $("#btnsrch").click(function () {
                let obj = {
                    url: "/srch-prov",
                    data: {
                        email: $("#txtem").val(),
                    }
                }
                $.ajax(obj).done(function (respary) {
                    //alert(JSON.stringify(respary));
                    $("#txtname").val(respary[0].name);
                    $("#txtno").val(respary[0].contact);
                    $("#selgen").val(respary[0].gender);
                    $("#selctg").val(respary[0].category);
                    $("#txtfrm").val(respary[0].firm);
                    $("#txtweb").val(respary[0].website);
                    $("#txtadd").val(respary[0].location);
                    $("#since").val(respary[0].since);
                    $("#prev").prop("src", "uploads/" + respary[0].proofpic);
                    $("#hdn").val(respary[0].proofpic);
                    $("#txtar").val(respary[0].otherinfo);
                }).fail(function (err) {
                    alert("Error=" + err);
                })
            })
        })
    </script>
</head>

<body style="background-color: antiquewhite;">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="./pictures/icon.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
                <span
                    style="font-weight: bold; font-family: Georgia, 'Times New Roman', Times, serif; font-style: italic;">Welcome
                    Well</span>
            </a>
        </div>
    </nav>
    <form class="row g-3" style="margin-top: 40px; margin-left: 30px;" action="/save-provv" method="post"
        enctype="multipart/form-data">
        <input type="hidden" id="hdn" name="hdn">
        <div class="col-md-6">
            <p>
                <label class="form-label">Email ID</label>
                <input type="email" class="form-control" id="txtem" name="txtem">
            </p>
        </div>
        <div class="col-md-6" style="margin-top: 48px;">
            <p>
                <input type="button" id="btnsrch" name="btnsrch" value="Search" class="btn btn-primary">
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">Name</label>
                <input type="text" class="form-control" id="txtname" name="txtname">
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">Contact Number</label>
                <input type="text" class="form-control" id="txtno" name="txtno">
            </p>
        </div>
        <div class="col-md-2">
            <p>
                <label class="form-label">Gender</label>
                <select class="form-select" id="selgen" name="selgen">
                    <option value="">Select</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">Category</label>
                <select class="form-select" id="selctg" name="selctg">
                    <option value="">Select</option>
                    <option value="Plumber">Plumber</option>
                    <option value="Electrician">Electrician</option>
                    <option value="Painter">Painter</option>
                    <option value="Carpenter">Carpenter</option>
                    <option value="Washerman">Washerman</option>
                    <option value="Chef">Chef</option>
                    <option value="Maid">Maid</option>
                    <option value="Labour">Labour</option>
                    <option value="Cleaner">Cleaner</option>
                    <option value="Baby Sitter">Baby Sitter</option>
                    <option value="Gardener">Gardener</option>
                    <option value="Dog Walker">Dog Walker</option>
                    <option value="Maintenance Worker">Maintenance Worker</option>
                </select>
            </p>
        </div>
        <div class="col-md-3">
            <p>
                <label class="form-label">Firm(IF ANY)</label>
                <input type="text" class="form-control" id="txtfrm" name="txtfrm">
            </p>
        </div>
        <div class="col-md-3">
            <p>
                <label class="form-label">Website(IF ANY)</label>
                <input type="text" class="form-control" id="txtweb" name="txtweb">
            </p>
        </div>
        <div class="col-6">
            <p>
                <label class="form-label">Firm Location/Address</label>
                <input type="text" class="form-control" id="txtadd" name="txtadd">
            </p>
        </div>
        <div class="col-md-2">
            <p>
                <label class="form-label">Since</label>
                <input type="date" class="form-control" id="since" name="since">
            </p>
        </div>
        <div class="col-md-3"></div>
        <div style="padding-right: 450px;">
            <p><label class="form-label">Specialization/Other Info/Previous Work</label><textarea class="form-control"
                    id="txtar" name="txtar"></textarea></p>
        </div>
        <div class="col-md-3">
            <p>
                <label class="form-label">ID Proof</label>
                <input type="file" name="ppic" id="ppic" class="form-control" onchange="doShowPrev(this,prev)">
            </p>
        </div>
        <div class="col-md-3">
            <p>
                <img id="prev" style="width: 170px; height: 200px;">
            </p>
        </div>
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="chkbox" name="chkbox" checked>
                <label class="form-check-label" for="gridCheck">
                    I agree to the <span style="color: blue; text-decoration: underline;"> Terms & Conditions </span>
                </label>
            </div>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary">Upload Data</button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="submit" class="btn btn-primary" value="Edit My Info" formaction="/edit-prov">
        </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>