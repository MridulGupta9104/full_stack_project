<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#btn1").click(function () {
                let obj = {
                    url: "/find_record",
                    data: {
                        email: $("#txtem").val(),
                    }
                }
                $.ajax(obj).done(function (respjsonary) {
                    //alert(JSON.stringify(respjsonary));
                    $("#txtname").val(respjsonary[0].naam);
                    $("#txtno").val(respjsonary[0].contact);
                    $("#txtadd").val(respjsonary[0].address);
                    $("#txtct").val(respjsonary[0].city);
                    $("#state").val(respjsonary[0].state);
                    $("#prev").prop("src", "uploads/" + respjsonary[0].ppic);
                    $("#hdn").val(respjsonary[0].ppic);
                }).fail(function (err) {
                    alert("Error=" + err);
                })
            })
        })
    </script>
    <script>
        function doShowPrev(refFile, refImg) {
            const [file] = refFile.files
            if (file) {
                refImg.src = URL.createObjectURL(file)
            }
        }
    </script>
</head>

<body>
    <form class="row g-3" style="margin-top: 40px; margin-left: 30px;" action="/save_rec" method="post"
        enctype="multipart/form-data">
        <input type="hidden" id="hdn" name="hdn">
        <div class="col-md-6">
            <p>
                <label class="form-label">Email ID</label>
                <input type="email" class="form-control" id="txtem" name="txtem">
            </p>
        </div>
        <div class="col-md-6" style="margin-top: 48px;">
            <p>
                <input type="button" id="btn1" name="btn1" value="Search" class="btn btn-primary">
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">Name</label>
                <input type="text" class="form-control" id="txtname" name="txtname">
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">Contact Number</label>
                <input type="text" class="form-control" id="txtno" name="txtno">
            </p>
        </div>
        <div class="col-8">
            <p>
                <label class="form-label">Address</label>
                <input type="text" class="form-control" id="txtadd" name="txtadd">
            </p>
        </div>
        <div class="col-md-6">
            <p>
                <label class="form-label">City</label>
                <input type="text" class="form-control" id="txtct" name="txtct">
            </p>
        </div>
        <div class="col-md-4">
            <p>
                <label class="form-label">State</label>
                <select id="state" name="state" class="form-select">
                    <option value="">Select State</option>
                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chandigarh">Chandigarh</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                    <option value="Daman and Diu">Daman and Diu</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Lakshadweep">Lakshadweep</option>
                    <option value="Puducherry">Puducherry</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                </select>
            </p>
        </div>

        <div class="col-md-3">
            <p>
                <label class="form-label">Profile Pic</label>
                <input type="file" name="ppic" id="ppic" class="form-control" onchange="doShowPrev(this,prev)">
            </p>
        </div>
        <div class="col-md-3">
            <p>
                <img id="prev" style="width: 170px; height: 200px;">
            </p>
        </div>
        <div class="col-12">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="chkbox" name="chkbox" checked>
                <label class="form-check-label" for="gridCheck">
                    I agree to the <span style="color: blue; text-decoration: underline;"> Terms & Conditions </span>
                </label>
            </div>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary">Save</button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="submit" class="btn btn-primary" value="Modify" formaction="/update_rec">
        </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>